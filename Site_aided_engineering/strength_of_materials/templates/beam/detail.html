{% extends 'base.html' %}
{% load static %}
{% block title %} Проект:{{ project.name }} {% endblock %}

{% block script %}
	<script src = "{% static 'js/main.js' %}" type="text/javascript"></script>
{% endblock %}

{% block style %}
	<style type="text/css">
		canvas {
			border: solid;
			border-radius: 5px;
		}
	</style>
{% endblock %}

{% block main %}
    <h1>Проект:</h1>
    <p>{{ project.name }}</p>
    <h2>Описание:</h2>
    <p>{{ project.description }}</p>
    <h2>Схема</h2>
    {{ project.data }}
    <canvas id="calculated_scheme"></canvas>
    <script type="text/javascript">


        var data2 = '[{"Start_point": {"x": 20, "y": 32}, "End_point": {"x": 20, "y": 32}, "name": "Centerline"}, {"Start_point": {"x": 20, "y": 32}, "End_point": {"x": 20, "y": 32}, "name": "Centerline"}]'
        data2 = "[{'Start_point': {'x': 20, 'y': 32}, 'End_point': {'x': 20, 'y': 32}, 'name': 'Centerline'}, {'Start_point': {'x': 20, 'y': 32}, 'End_point': {'x': 20, 'y': 32}, 'name': 'Centerline'}]"
        console.log(data2)
        data2 = data2.toString();



        var data = "{{ project.data|safe }}";
        for(let i = 0; i < data2.length; i++){
            console.log(data2[i]);
            if(data2[i] == "'"){

            }
        }
        data2 = JSON.parse(data2)
        /*
        console.log(data2)


        console.log("полученная дата: " + data)


        data = JSON.parse(data)
        console.log(data + "длина: " + data.length)
        for (let i = 0; i < data.length; i++){
            console.log(data[i])
        }*/

		var model = new Model("calculated_scheme", 400, 400);
		var controller = new Controller(model);

	</script>
    <h2>Создано:</h2>
    <p>{{ project.time_create  }}</p>
    <!--
    <h2>Изминено:</h2>
    <p>{{ project.time_update  }}</p>
    -->
    <a href="{% url 'delete' project.id %}">Удалить</a>
    <!--<a href="{% url 'update' project.id %}">Редактировать</a>-->

{% endblock %}